library(rugarch)
spec=ugarchspec()
spec1=ugarchspec()
spec2=ugarchspec(variance.model = list(model = "eGARCH", garchOrder = c(1, 1)))

runGarch=function(spec, GT.list) {
fit=list()
for(i in 1:length(GT.list)){
  data=GT.list[[i]]
  returns=data[,2]
  #returns=na.approx(returns, na.rm=F)
  returns=returns[-which(is.na(returns))]
  fit[[i]]=NA
  
  errortest=tryCatch(
    ugarchfit(spec, returns),
    error=function(e) e
    )

  if(!inherits(errortest, "error")){
    fit[[i]]=ugarchfit(spec=spec, data=returns)
  }
}
return(fit)
}

fit1=runGarch(spec1, GT.list)
fit2=runGarch(spec2, GT.list)
